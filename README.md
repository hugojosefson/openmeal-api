# Unofficial API for Open Meal Information

[![Build Status](https://travis-ci.org/hugojosefson/openmeal-api.svg?branch=master)](https://travis-ci.org/hugojosefson/openmeal-api)
[![npm page](https://img.shields.io/npm/v/@hugojosefson/openmeal-api.svg)](https://npmjs.com/package/@hugojosefson/openmeal-api)
[![License ISC](https://img.shields.io/npm/l/@hugojosefson/openmeal-api.svg)](https://tldrlegal.com/license/-isc-license)
[![SemVer 2.0.0](https://img.shields.io/badge/SemVer-2.0.0-lightgrey.svg)](http://semver.org/spec/v2.0.0.html)
[![JavaScript Style Guide](https://img.shields.io/badge/code_style-standard-brightgreen.svg)](https://standardjs.com)

[![Waffle.io](https://img.shields.io/waffle/label/hugojosefson/openmeal-api/inbox.svg)](https://waffle.io/hugojosefson/openmeal-api)
[![Waffle.io](https://img.shields.io/waffle/label/hugojosefson/openmeal-api/to%20do.svg)](https://waffle.io/hugojosefson/openmeal-api)
[![Waffle.io](https://img.shields.io/waffle/label/hugojosefson/openmeal-api/in%20progress.svg)](https://waffle.io/hugojosefson/openmeal-api)
[![Waffle.io](https://img.shields.io/waffle/label/hugojosefson/openmeal-api/done.svg)](https://waffle.io/hugojosefson/openmeal-api)

## Introduction

This is an unofficial API module for accessing Swedish school lunch
menus from [skolmaten.se](https://skolmaten.se/) via Open Meal
Information as specified at
<https://orebrokommun.github.io/Open-Meal-Information/>

## Prerequisite

Node.js, at least `v6.0.0`.

Recommended to install latest via [nvm](https://github.com/creationix/nvm#readme):

```bash
nvm install stable
```

## Installation in a project

```bash
yarn add @hugojosefson/openmeal-api
 # or
npm install --save @hugojosefson/openmeal-api
```

## Programmatic access

It is recommended to `import` or `require` the module, and use its exported functions programmatically.

### API

<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

##### Table of Contents

-   [getDataProviders](#getdataproviders)
-   [getDataProviderSkolmaten](#getdataproviderskolmaten)
-   [getDistributors](#getdistributors)
-   [filterDistributors](#filterdistributors)

#### getDataProviders

Returns data providers.

**Parameters**

-   `url` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** for the data providers json. Defaults to <https://raw.githubusercontent.com/Orebrokommun/Open-Meal-Information/master/dataproviders.json> as per <https://orebrokommun.github.io/Open-Meal-Information/doc/list-data-providers.html>

Returns **[Promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)** A Promise of the <code>data</code> property of the response from the server.

#### getDataProviderSkolmaten

Returns the data provider with name === 'Skolmaten'.

**Parameters**

-   `url` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** for the data providers json. Defaults to <https://raw.githubusercontent.com/Orebrokommun/Open-Meal-Information/master/dataproviders.json> as per <https://orebrokommun.github.io/Open-Meal-Information/doc/list-data-providers.html>

Returns **[Promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)** A Promise of the <code>data</code> property of the response from the server.

#### getDistributors

Returns distributors from a data provider.

**Parameters**

-   `data` **{baseUrl}** provider object to fetch distributors from.

Returns **[Promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)** A Promise of the <code>data</code> property of the response from the server.

#### filterDistributors

Filters distributors based on partial name and/or partial address.

**Parameters**

-   `distributors` **[Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)** current distributors to filter, for example from <code>getDistributors</code> or the result of previous call to this function.
-   `name` **([string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String) \| [undefined](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/undefined))** if specified, only include distributors in result which contain this string in their <code>name</code>, case insensitively.
-   `address` **([string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String) \| [undefined](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/undefined))** if specified, only include distributors in result which contain this string in their <code>addressRegion</code> or <code>addressLocality</code>, case insensitively.

Returns **[Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)** array of distributors matching the criteria.

## Usage on CLI

You can also try it from the command-line.

```bash
./node_modules/.bin/openmeal-api
```

Prints usage information for the CLI.
